---
import { getCollection, getEntryBySlug } from "astro:content";
import ProjectsLayout from "../../layouts/ProjectsLayout.astro";
import Prose from "../../components/Prose.astro";

const { slug } = Astro.params;

if (!slug) {
  throw new Error("Slug is required");
}

const entry = await getEntryBySlug("projects", slug);

if (!entry) {
  return Astro.redirect("/404");
}

const { Content } = await entry.render();
---

<ProjectsLayout {...entry.data}>
  <Prose>
    <Content />
  </Prose>
</ProjectsLayout>
